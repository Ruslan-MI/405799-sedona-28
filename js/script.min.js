var searchPopupOpen=document.querySelector(".search-popup-open"),searchPopup=document.querySelector(".search-popup"),searchForm=searchPopup.querySelector(".search-form"),dateInInput=searchForm.querySelector("[name=date-in]"),dateOutInput=searchForm.querySelector("[name=date-out]"),adultsInput=searchForm.querySelector("[name=adults]"),adultsMinus=searchForm.querySelector(".adults .minus"),adultsPlus=searchForm.querySelector(".adults .plus"),childrenInput=searchForm.querySelector("[name=children]"),childrenMinus=searchForm.querySelector(".children .minus"),childrenPlus=searchForm.querySelector(".children .plus"),searchFormSubmit=searchForm.querySelector(".search-form-submit"),isStorageSupport=!0,adults="";try{adults=localStorage.getItem("adults")}catch(e){isStorageSupport=!1}searchPopup.classList.add("visually-hidden"),searchPopup.classList.add("narrowing"),searchPopupOpen.addEventListener("click",function(){searchPopup.classList.contains("visually-hidden")&&(searchPopup.classList.remove("visually-hidden"),isStorageSupport?(adultsInput.value=localStorage.getItem("adults"),adultsInput.value<1&&(adultsInput.value=2),childrenInput.value=localStorage.getItem("children"),childrenInput.value<1&&(childrenInput.value=0)):(adultsInput.value=2,childrenInput.value=0)),searchPopup.classList.toggle("narrowing"),searchPopup.classList.toggle("expansion"),searchPopup.classList.contains("expansion")&&(dateInInput.focus(),dateInInput.select())}),dateInInput.addEventListener("focus",function(){searchPopup.classList.contains("visually-hidden")&&(searchPopup.classList.remove("visually-hidden"),isStorageSupport?(adultsInput.value=localStorage.getItem("adults"),adultsInput.value<1&&(adultsInput.value=2),childrenInput.value=localStorage.getItem("children"),childrenInput.value<1&&(childrenInput.value=0)):(adultsInput.value=2,childrenInput.value=0)),searchPopup.classList.contains("narrowing")&&(searchPopup.classList.remove("narrowing"),searchPopup.classList.add("expansion"))}),searchFormSubmit.addEventListener("focus",function(){searchPopup.classList.contains("visually-hidden")&&(searchPopup.classList.remove("visually-hidden"),isStorageSupport?(adultsInput.value=localStorage.getItem("adults"),adultsInput.value<1&&(adultsInput.value=2),childrenInput.value=localStorage.getItem("children"),childrenInput.value<1&&(childrenInput.value=0)):(adultsInput.value=2,childrenInput.value=0)),searchPopup.classList.contains("narrowing")&&(searchPopup.classList.remove("narrowing"),searchPopup.classList.add("expansion"),dateInInput.focus(),dateInInput.select())}),window.addEventListener("keydown",function(e){27===e.keyCode&&searchPopup.classList.contains("expansion")&&(e.preventDefault(),searchPopup.classList.remove("expansion"),searchPopup.classList.add("narrowing"))}),adultsMinus.addEventListener("click",function(){1<adultsInput.value&&adultsInput.value--}),adultsInput.addEventListener("keydown",function(e){40===e.keyCode&&1<adultsInput.value&&adultsInput.value--}),adultsPlus.addEventListener("click",function(){adultsInput.value<9&&adultsInput.value++}),adultsInput.addEventListener("keydown",function(e){38===e.keyCode&&adultsInput.value<9&&adultsInput.value++}),childrenMinus.addEventListener("click",function(){0<childrenInput.value&&childrenInput.value--}),childrenInput.addEventListener("keydown",function(e){40===e.keyCode&&0<childrenInput.value&&childrenInput.value--}),childrenPlus.addEventListener("click",function(){childrenInput.value<9&&childrenInput.value++}),childrenInput.addEventListener("keydown",function(e){38===e.keyCode&&childrenInput.value<9&&childrenInput.value++}),searchFormSubmit.addEventListener("click",function(e){searchForm.checkValidity()?isStorageSupport&&(localStorage.setItem("adults",adultsInput.value),localStorage.setItem("children",childrenInput.value)):(e.preventDefault(),searchPopup.classList.remove("shake"),searchPopup.offsetWidth,searchPopup.classList.add("shake"))}),document.querySelector(".map-image").classList.add("visually-hidden");var stateMap=document.querySelector(".state-map"),mapWrapper=document.createElement("div");mapWrapper.classList.add("map-wrapper"),mapWrapper.id="map",stateMap.appendChild(mapWrapper);var mapScript=document.createElement("script");mapScript.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBSyupZ0960ucVfQie8Zo9ohagG5URMRO0&callback=indexMap",mapScript.defer=!0,mapScript.async=!0,window.indexMap=function(){var e=new google.maps.Map(document.getElementById("map"),{zoom:9,center:{lat:34.757,lng:-111.737},disableDefaultUI:!0});new google.maps.Marker({position:{lat:34.866,lng:-111.76},map:e})},document.body.appendChild(mapScript);