var searchPopupOpen=document.querySelector(".search-popup-open"),searchPopup=document.querySelector(".search-popup"),searchForm=searchPopup.querySelector(".search-form"),dateInInput=searchForm.querySelector("[name=date-in]"),dateOutInput=searchForm.querySelector("[name=date-out]"),adultsInput=searchForm.querySelector("[name=adults]"),adultsMinus=searchForm.querySelector(".adults .minus"),adultsPlus=searchForm.querySelector(".adults .plus"),childrenInput=searchForm.querySelector("[name=children]"),childrenMinus=searchForm.querySelector(".children .minus"),childrenPlus=searchForm.querySelector(".children .plus"),searchFormSubmit=searchForm.querySelector(".search-form-submit"),isStorageSupport=!0,adults="";searchPopup.classList.add("visually-hidden"),searchPopup.classList.add("narrowing");try{adults=localStorage.getItem("adults")}catch(e){isStorageSupport=!1}searchPopupOpen.addEventListener("click",function(e){searchPopup.classList.remove("visually-hidden"),searchPopup.classList.toggle("narrowing"),searchPopup.classList.toggle("expansion"),searchPopup.classList.contains("narrowing")||(dateInInput.focus(),adults?(adultsInput.value=localStorage.getItem("adults"),childrenInput.value=localStorage.getItem("children")):(adultsInput.value=2,childrenInput.value=0))}),searchForm.addEventListener("submit",function(e){dateInInput.value&&dateOutInput.value&&adultsInput.value&&childrenInput.value?isStorageSupport&&(localStorage.setItem("adults",adultsInput.value),localStorage.setItem("children",childrenInput.value)):e.preventDefault()}),window.addEventListener("keydown",function(e){27===e.keyCode&&(searchPopup.classList.contains("narrowing")||(e.preventDefault(),searchPopup.classList.add("narrowing"),searchPopup.classList.remove("expansion")))}),dateInInput.addEventListener("focus",function(e){searchPopup.classList.contains("narrowing")&&(searchPopup.classList.remove("visually-hidden"),searchPopup.classList.remove("narrowing"),searchPopup.classList.add("expansion"))}),searchFormSubmit.addEventListener("focus",function(e){searchPopup.classList.contains("narrowing")&&(searchPopup.classList.remove("visually-hidden"),searchPopup.classList.remove("narrowing"),searchPopup.classList.add("expansion"))}),adultsMinus.addEventListener("click",function(e){1<adultsInput.value&&adultsInput.value--}),adultsPlus.addEventListener("click",function(e){adultsInput.value<9&&adultsInput.value++}),childrenMinus.addEventListener("click",function(e){0<childrenInput.value&&childrenInput.value--}),childrenPlus.addEventListener("click",function(e){childrenInput.value<9&&childrenInput.value++});